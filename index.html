<!DOCTYPE html>
<html>
  <head>
    <title>Hello World!</title>
    <script type="text/javascript">
      var NodeGit = require("nodegit");
      var repoPath = "/Users/thiago/Projects/repositorios/cep";

      NodeGit.Repository.open(repoPath).then(function(repo) {
        repo.getStatus().then(function(status) {
          console.log(status);
        });
        repo.getMasterCommit().then(function(firstCommitOnMaster) {
          // Create a new history event emitter.
          var history = firstCommitOnMaster.history();

          // Create a counter to only show up to 9 entries.
          var count = 0;

          // Listen for commit events from the history.
          history.on("commit", function(commit) {
            // Disregard commits past 9.
            if (++count >= 9) {
              return;
            }

            // Show the commit sha.
            console.log("commit " + commit.sha());

            // Store the author object.
            var author = commit.author();

            // Display author information.
            console.log("Author:\t" + author.name() + " <" + author.email() + ">");

            // Show the commit date.
            console.log("Date:\t" + commit.date());

            // Give some space and show the message.
            console.log("\n    " + commit.message());
          });

          // Start emitting events.
          history.start();
        });
      }).done();
    </script>
  </head>
  <body>
    <h1>Console</h1>
    <div id="console" style="height: 200px"></div>
    <h1>Error console</h1>
    <div id="errorConsole" style="height: 200px"></div>
  </body>
</html>
